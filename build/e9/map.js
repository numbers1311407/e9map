$(function(){function f(e){i.fadeIn("fast",e)}function l(e){i.fadeOut("fast",e)}function c(e){i.fadeToggle("fast",e)}function h(t){u.children(t).fadeOut(e,function(){$(this).remove()})}function p(t){$('<div class="cc '+t+'">').hide().appendTo(u).fadeIn(e)}var e=250,t='    <div class="popover-outer">      <div class="popover">        <div class="popover-top">          <span class="popover-left"></span>          <span class="popover-right"></span>        </div>        <div class="popover-middle">          <div class="popover-middle-inner">            <div class="popover-content"></div>            <a class="popover-dismiss" href="#">              <span>Close</span>              <span class="popover-x">X</span>            </a>          </div>        </div>        <div class="popover-bottom">          <span class="popover-left"></span>          <span class="popover-right"></span>        </div>      </div>    </div>  ',n=$("#e9map"),r=$(".data",n),i=$(t).hide().appendTo(n),s=$(".popover",i),o=$(".popover-dismiss",i),u=$('<div class="overlays"></div>').prependTo(n),a=s.css("width");/^0(px)?$/.test(a)&&(a=400),o.click(function(e){e&&e.preventDefault(),l()}),n.click(function(){l()}),s.click(function(e){e&&e.stopPropagation()}),$("#e9map .data > div").each(function(){var e=$(this),t=e.attr("class"),n=e.find(".content"),r=e.attr("data-x")||0,o=e.attr("data-y")||0,u=$('<div class="btn">'+t+"</div>").css({left:r+"px",top:o+"px"}).hover(function(){$(this).addClass("hover"),h(":not(."+t+")"),p(t)},function(){$(this).removeClass("hover"),h("."+t)}).click(function(e){e&&e.stopPropagation(),i.data("e9map")==this?c():(i.data("e9map",this),l(function(){s.css({left:n.attr("data-x")||0,top:n.attr("data-y")||0,width:n.attr("data-width")||a}).find(".popover-content").html(n),f()}))}).appendTo(e)}),$("#e9map .content a").click(function(e){e.preventDefault(),window.open(this.href)})});